# Website Cloner Frontend

This is the frontend for the Website Cloner project, built with **Next.js** and **TypeScript**. It provides a user-friendly interface for entering a website URL, visualizing the extracted design context, and previewing the cloned HTML generated by the backend.

---

## Features

- **URL Input**: Enter any public website URL to analyze or clone.
- **Design Context Visualization**: See extracted colors, typography, layout, assets, and more.
- **Live HTML Preview**: Instantly view the cloned website as generated by the backend.
- **Responsive UI**: Works well on desktop and mobile.
- **Robust Error Handling**: User-friendly error messages and loading indicators.

---

## Prerequisites

- **Node.js** (v18 or higher recommended)
- **npm** (comes with Node.js)

Check your versions:

```bash
node --version
npm --version
```

---

## Installation

1. **Install dependencies:**
   ```bash
   npm install
   ```

---

## Environment Setup

1. **Configure Backend URL:**
   - By default, the frontend expects the backend API at `http://localhost:8000`.
   - To change this, create a `.env.local` file in the root of the frontend directory:
     ```env
     NEXT_PUBLIC_BACKEND_URL=http://localhost:8000
     ```

---

## Running the Development Server

Start the Next.js development server:

```bash
npm run dev
```

Visit [http://localhost:3000](http://localhost:3000) in your browser.

---

## Building for Production

To build and start the app in production mode:

```bash
npm run build
npm start
```

---

## Connecting to the Backend

- Ensure the backend FastAPI server is running (see backend README for setup).
- The frontend will make API requests to the backend for cloning and analyzing websites.
- If you change the backend URL, update `NEXT_PUBLIC_BACKEND_URL` in your `.env.local`.

---

## Usage Instructions

1. **Start the backend** (see backend README for instructions).
2. **Start the frontend** as described above.
3. **Enter a public website URL** in the input field.
4. **Click the analyze/clone button** to process the website.
5. **View the extracted design context** (colors, fonts, layout, etc.).
6. **Preview the cloned HTML** in the live preview section.

---

## Project Structure

```
frontend/
├── public/                # Static assets (SVGs, icons, etc.)
├── src/
│   └── app/
│       ├── components/    # Reusable UI components
│       │   ├── ActionButtons.tsx
│       │   ├── AnalysisAccordion.tsx
│       │   ├── analysisUtils.tsx
│       │   ├── ComparisonView.tsx
│       │   ├── DesignContextCard.tsx
│       │   ├── DotsLoader.tsx
│       │   ├── Header.tsx
│       │   ├── InputCard.tsx
│       │   ├── PreviewSection.tsx
│       │   └── Toast.tsx
│       ├── favicon.ico
│       ├── globals.css    # Global styles
│       ├── layout.tsx     # App layout
│       ├── page.tsx       # Main page logic
│       ├── types.ts       # TypeScript types
│       └── utils/
│           └── analysisUtils.tsx
├── package.json           # Project metadata and scripts
├── next.config.ts         # Next.js configuration
├── tsconfig.json          # TypeScript configuration
└── ...
```

**Key files/folders:**

- `components/`: All major UI building blocks.
- `types.ts`: Shared TypeScript types for design context and API responses.
- `page.tsx`: Main app logic and routing.
- `next.config.ts`: Next.js and image domain configuration.

---

## Customization

- **Change Backend URL:** Edit `.env.local` as described above.
- **Allow More Image Domains:**
  - Edit `next.config.ts` and add domains to the `images.domains` array if you see errors about external images.
- **Styling:**
  - Edit `globals.css` or add new styles in the `styles/` directory.

---

## Troubleshooting

- **API errors:** Ensure the backend is running and accessible at the configured URL.
- **CORS issues:** The backend should have CORS enabled for the frontend origin.
- **Image errors:** If you see errors about external images, add the image domains to `next.config.ts` under `images.domains`.
- **Port conflicts:** If port 3000 is in use, set a different port with `-p` (e.g., `npm run dev -p 3001`).
- **TypeScript errors:** Run `npm run lint` or check your IDE for type issues.

---

## Contributing

1. Fork the repository.
2. Create a new branch for your feature or bug fix.
3. Make your changes and commit with clear messages.
4. Push your branch and open a pull request.

---

## License

This project is licensed under the MIT License. See the LICENSE file for details.

---

## Related Resources

- [Backend README](../backend/README.md)
- [Next.js Documentation](https://nextjs.org/docs)
- [FastAPI Documentation](https://fastapi.tiangolo.com/)

---

## API Contract & Example Response

The frontend communicates with the backend via HTTP API calls. Below are the main endpoints and the expected response structure.

### `/clone` (POST)

- **Request Body Example:**
  ```json
  {
    "url": "https://example.com",
    "model": "gpt-4o",
    "include_images": true,
    "include_styles": true
  }
  ```
- **Response Example:**
  ```json
  {
    "status": "success",
    "original_url": "https://example.com",
    "model_used": "gpt-4o",
    "html": "<html>...</html>",
    "design_context": {
      "title": "Example Domain",
      "description": "This domain is for use in illustrative examples...",
      "content_structure": [
        {
          "tag": "h1",
          "text": "Example Domain",
          "class": "",
          "id": "",
          "style": ""
        }
      ],
      "color_palette": ["#ffffff", "#000000"],
      "typography": {
        "h1": { "fontFamily": "Arial", "fontSize": "32px", "color": "#000" }
      },
      "layout_info": {
        "sections": [{ "tag": "main", "class": "", "children_count": 2 }]
      },
      "images": [
        { "src": "https://example.com/image.png", "alt": "Example image" }
      ],
      "stylesheets": ["https://example.com/styles.css"],
      "dom_structure": { "tag": "body", "class": "", "id": "", "children": [] },
      "css_contents": ["body { background: #fff; }"],
      "full_html": "<html>...</html>",
      "screenshot": null,
      "assets": [{ "url": "https://example.com/image.png", "type": "image" }],
      "fonts": ["Arial", "Helvetica"],
      "media_queries": [{ "query": "(max-width: 600px)", "rules": "..." }],
      "embedded_styles": [".main { color: #333; }"],
      "inline_styles": [{ "selector": "h1", "style": "color: #000;" }]
    },
    "metadata": {
      "title": "Example Domain",
      "description": "This domain is for use in illustrative examples...",
      "content_elements": 1,
      "colors": 2,
      "images": 1,
      "stylesheets": 1
    }
  }
  ```

### `/analyze` (POST)

- **Request Body Example:**
  ```json
  {
    "url": "https://example.com",
    "model": "gpt-4o"
  }
  ```
- **Response Example:**

  ```json
  {
    "status": "success",
    "original_url": "https://example.com",
    "model_used": "gpt-4o",
    "design_context": {
      "title": "Example Domain",
      "description": "This domain is for use in illustrative examples...",
      "content_structure": [ ... ],
      "color_palette": [ ... ],
      "typography": { ... },
      "layout_info": { ... },
      "images": [ ... ],
      "stylesheets": [ ... ],
      "dom_structure": { ... },
      "css_contents": [ ... ],
      "full_html": "<html>...</html>",
      "screenshot": null,
      "assets": [ ... ],
      "fonts": [ ... ],
      "media_queries": [ ... ],
      "embedded_styles": [ ... ],
      "inline_styles": [ ... ]
    },
    "metadata": { ... }
  }
  ```

- The frontend expects the `design_context` object to contain all the design-related fields as arrays or objects (not as JSON strings or numbers), matching the TypeScript types in `src/app/types.ts`.
